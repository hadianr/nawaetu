#!/bin/bash
# Performance Testing Script for Nawaetu
# This script helps verify all optimizations are working correctly

echo \"üöÄ Nawaetu Performance Optimization Verification\"\necho \"================================================\"\necho \"\"\n\n# Colors for output\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nNC='\\033[0m' # No Color\n\necho \"${BLUE}üìã Verification Checklist${NC}\"\necho \"\"\n\n# Check 1: Build Configuration\necho \"${BLUE}1Ô∏è‚É£ Checking Build Configuration...${NC}\"\nif grep -q \"optimizePackageImports\" next.config.ts; then\n  echo \"${GREEN}‚úÖ optimizePackageImports configured${NC}\"\nelse\n  echo \"${RED}‚ùå Missing optimizePackageImports${NC}\"\nfi\n\nif grep -q \"splitChunks\" next.config.ts; then\n  echo \"${GREEN}‚úÖ Code splitting configured${NC}\"\nelse\n  echo \"${RED}‚ùå Missing code splitting${NC}\"\nfi\n\nif grep -q \"image optimization\" next.config.ts; then\n  echo \"${GREEN}‚úÖ Image optimization configured${NC}\"\nelse\n  echo \"${RED}‚ùå Missing image optimization${NC}\"\nfi\n\necho \"\"\n\n# Check 2: Dynamic Imports\necho \"${BLUE}2Ô∏è‚É£ Checking Dynamic Imports...${NC}\"\nif grep -q \"dynamic(() => import\" src/app/page.tsx; then\n  echo \"${GREEN}‚úÖ Dynamic imports configured${NC}\"\nelse\n  echo \"${RED}‚ùå Missing dynamic imports${NC}\"\nfi\n\necho \"\"\n\n# Check 3: Font Optimization\necho \"${BLUE}3Ô∏è‚É£ Checking Font Optimization...${NC}\"\nif grep -q \"preload: true\" src/app/layout.tsx; then\n  echo \"${GREEN}‚úÖ Font preload configured${NC}\"\nelse\n  echo \"${RED}‚ùå Missing font preload${NC}\"\nfi\n\nif grep -q \"display.*swap\" src/app/layout.tsx; then\n  echo \"${GREEN}‚úÖ Font display swap configured${NC}\"\nelse\n  echo \"${RED}‚ùå Missing font display swap${NC}\"\nfi\n\necho \"\"\n\n# Check 4: Middleware\necho \"${BLUE}4Ô∏è‚É£ Checking Middleware...${NC}\"\nif [ -f \"src/middleware.ts\" ]; then\n  echo \"${GREEN}‚úÖ Middleware file exists${NC}\"\n  if grep -q \"Cache-Control\" src/middleware.ts; then\n    echo \"${GREEN}‚úÖ Cache headers configured${NC}\"\n  else\n    echo \"${RED}‚ùå Missing cache headers${NC}\"\n  fi\nelse\n  echo \"${RED}‚ùå Middleware file missing${NC}\"\nfi\n\necho \"\"\n\n# Check 5: Web Vitals\necho \"${BLUE}5Ô∏è‚É£ Checking Web Vitals Monitoring...${NC}\"\nif [ -f \"src/components/WebVitals.tsx\" ]; then\n  echo \"${GREEN}‚úÖ WebVitals component exists${NC}\"\n  if grep -q \"useReportWebVitals\" src/components/WebVitals.tsx; then\n    echo \"${GREEN}‚úÖ Web Vitals tracking configured${NC}\"\n  else\n    echo \"${RED}‚ùå Missing Web Vitals tracking${NC}\"\n  fi\nelse\n  echo \"${RED}‚ùå WebVitals component missing${NC}\"\nfi\n\necho \"\"\n\n# Check 6: CSS Optimization\necho \"${BLUE}6Ô∏è‚É£ Checking CSS Optimization...${NC}\"\nif grep -q \"will-change\" src/app/globals.css; then\n  echo \"${GREEN}‚úÖ GPU acceleration configured${NC}\"\nelse\n  echo \"${YELLOW}‚ö†Ô∏è  Could add GPU acceleration hints${NC}\"\nfi\n\nif grep -q \"antialiased\" src/app/globals.css; then\n  echo \"${GREEN}‚úÖ Font smoothing configured${NC}\"\nelse\n  echo \"${RED}‚ùå Missing font smoothing${NC}\"\nfi\n\necho \"\"\necho \"${BLUE}================================================${NC}\"\necho \"${GREEN}üìä Build & Test Commands:${NC}\"\necho \"\"\necho \"Clean build:\"\necho \"  rm -rf .next && npm run build\"\necho \"\"\necho \"Analyze bundle:\"\necho \"  npm run analyze\"\necho \"\"\necho \"Test locally:\"\necho \"  npm start\"\necho \"\"\necho \"Lighthouse (Chrome DevTools):\"\necho \"  1. Open http://localhost:3000\"\necho \"  2. DevTools ‚Üí Lighthouse\"\necho \"  3. Mode: Mobile\"\necho \"  4. Run audit\"\necho \"\"\necho \"${GREEN}üìà Expected Performance Score: 90+${NC}\"\necho \"${BLUE}================================================${NC}\"\n\necho \"\"\necho \"${YELLOW}‚è≠Ô∏è  Next Steps:${NC}\"\necho \"  1. Run 'npm run build' to create optimized build\"\necho \"  2. Run 'npm start' to test locally\"\necho \"  3. Run Lighthouse audit on http://localhost:3000\"\necho \"  4. Deploy to production\"\necho \"  5. Test on https://pagespeed.web.dev/\"\necho \"\"\n"